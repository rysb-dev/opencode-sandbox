# =============================================================================
# OpenCode Sandbox Configuration
# =============================================================================
# Edit this file to configure your network and filesystem whitelist.
# After editing, run: opencode-sandbox [project-directory]
# =============================================================================

# -----------------------------------------------------------------------------
# NETWORK WHITELIST
# -----------------------------------------------------------------------------
# List of domains that opencode can connect to (one per line).
# Lines starting with # are comments.
#
# Common API endpoints:
#   api.anthropic.com         - Claude API
#   api.openai.com            - OpenAI API
#   api.githubcopilot.com     - GitHub Copilot
#   copilot-proxy.githubusercontent.com - GitHub Copilot proxy
#   github.com                - GitHub
#   api.github.com            - GitHub API

[network]
api.anthropic.com
api.openai.com
api.githubcopilot.com
copilot-proxy.githubusercontent.com
github.com
api.github.com
raw.githubusercontent.com

# -----------------------------------------------------------------------------
# PROXY CONFIGURATION (Optional)
# -----------------------------------------------------------------------------
# Configure HTTP/HTTPS proxy for corporate networks.
# Leave commented out to disable proxy support.
#
# http_proxy   - Proxy URL for HTTP connections
# https_proxy  - Proxy URL for HTTPS connections
# no_proxy     - Comma-separated list of hosts to bypass proxy
#
# Examples:
#   http_proxy=http://proxy.company.com:8080
#   https_proxy=http://proxy.company.com:8080
#   no_proxy=localhost,127.0.0.1,.company.com,intranet.local
#
# Note: If your proxy requires authentication:
#   http_proxy=http://username:password@proxy.company.com:8080

[proxy]
# http_proxy=http://proxy.company.com:8080
# https_proxy=http://proxy.company.com:8080
# no_proxy=localhost,127.0.0.1,.internal.company.com

# -----------------------------------------------------------------------------
# FILESYSTEM WHITELIST
# -----------------------------------------------------------------------------
# Additional directories to mount into the sandbox (one per line).
#
# The project directory you pass to opencode-sandbox is ALWAYS mounted
# read-write at /workspace inside the container.
#
# Format:
#   /path/to/directory        - mounted read-only (default)
#   /path/to/directory:rw     - mounted read-write
#
# Example:
#   /Users/yourname/shared-libs
#   /Users/yourname/other-project:rw

[filesystem]
# Add additional directories here

# -----------------------------------------------------------------------------
# SSH / GIT CONFIGURATION (Automatic)
# -----------------------------------------------------------------------------
# SSH support for git operations is automatically enabled:
#
# 1. Your ~/.ssh/ directory is mounted read-only into the container
#    (provides access to config, known_hosts, and keys)
#
# 2. SSH agent forwarding is enabled when SSH_AUTH_SOCK is available
#    (allows git push/pull without exposing private keys directly)
#
# 3. Port 22 (SSH) is allowed for whitelisted hosts
#
# To use git with SSH:
#   - Ensure github.com (or your git host) is in the [network] whitelist
#   - Start your SSH agent on the host: eval "$(ssh-agent -s)" && ssh-add
#   - Git operations like push/pull/clone will work inside the sandbox
#
# Note: If you see "Permission denied (publickey)" errors:
#   - Make sure your SSH agent is running: ssh-add -l
#   - On macOS, you may need to add keys to keychain: ssh-add --apple-use-keychain
